var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l,o;function r(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function c(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function d(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function f(){return p(" ")}function b(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function _(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function $(e,t,n){e.classList[n?"add":"remove"](t)}function z(e){o=e}function E(e){(function(){if(!o)throw new Error("Function called outside component initialization");return o})().$$.on_mount.push(e)}const F=[],k=[];let L=[];const M=[],S=Promise.resolve();let T=!1;function C(e){L.push(e)}const G=new Set;let N=0;function D(){if(0!==N)return;const e=o;do{try{for(;N<F.length;){const e=F[N];N++,z(e),O(e.$$)}}catch(e){throw F.length=0,N=0,e}for(z(null),F.length=0,N=0;k.length;)k.pop()();for(let e=0;e<L.length;e+=1){const t=L[e];G.has(t)||(G.add(t),t())}L.length=0}while(F.length);for(;M.length;)M.pop()();T=!1,G.clear(),z(e)}function O(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const P=new Set;function j(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];L.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),L=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function A(e,t){-1===e.$$.dirty[0]&&(F.push(e),T||(T=!0,S.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(a,l,r,c,d,u,h,v=[-1]){const p=o;z(a);const f=a.$$={fragment:null,ctx:[],props:u,update:e,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(p?p.$$.context:[])),callbacks:n(),dirty:v,skip_bound:!1,root:l.target||p.$$.root};h&&h(f.root);let b=!1;if(f.ctx=r?r(a,l.props||{},((e,t,...n)=>{const i=n.length?n[0]:t;return f.ctx&&d(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),b&&A(a,e)),t})):[],f.update(),b=!0,i(f.before_update),f.fragment=!!c&&c(f.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();l.intro&&((g=a.$$.fragment)&&g.i&&(P.delete(g),g.i(y))),function(e,n,a,l){const{fragment:o,after_update:r}=e.$$;o&&o.m(n,a),l||C((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):i(n),e.$$.on_mount=[]})),r.forEach(C)}(a,l.target,l.anchor,l.customElement),D()}var g,y;z(p)}class V{$destroy(){j(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const I=[];function Y(e,t,n){const i=e.slice();return i[55]=t[n],i[57]=n,i}function X(e,t,n){const i=e.slice();return i[55]=t[n],i[57]=n,i}function q(e){let t,n,s,a,l;function o(...t){return e[24](e[55],...t)}function r(...t){return e[25](e[55],...t)}return{c(){t=v("div"),n=f(),s=v("div"),g(t,"class","variance-circle svelte-bim9ea"),_(t,"width",129*e[55].variance+"px"),_(t,"height",129*e[55].variance+"px"),_(t,"left",176+176/3*e[55].mean.x+"px"),_(t,"top",176-176/3*e[55].mean.y+"px"),$(t,"highlight",e[57]===e[11]||e[9]),g(s,"class","mean-circle svelte-bim9ea"),_(s,"left",176+176/3*e[55].mean.x+"px"),_(s,"top",176-176/3*e[55].mean.y+"px"),$(s,"highlight",e[57]===e[11])},m(e,i){u(e,t,i),u(e,n,i),u(e,s,i),a||(l=[b(t,"mousedown",o),b(s,"mousedown",r)],a=!0)},p(n,i){e=n,8192&i[0]&&_(t,"width",129*e[55].variance+"px"),8192&i[0]&&_(t,"height",129*e[55].variance+"px"),8192&i[0]&&_(t,"left",176+176/3*e[55].mean.x+"px"),8192&i[0]&&_(t,"top",176-176/3*e[55].mean.y+"px"),2560&i[0]&&$(t,"highlight",e[57]===e[11]||e[9]),8192&i[0]&&_(s,"left",176+176/3*e[55].mean.x+"px"),8192&i[0]&&_(s,"top",176-176/3*e[55].mean.y+"px"),2048&i[0]&&$(s,"highlight",e[57]===e[11])},d(e){e&&m(t),e&&m(n),e&&m(s),a=!1,i(l)}}}function W(e){let t,n,i,s,a,l,o,r,c,h,b=e[55].mean.x.toFixed(2)+"",y=e[55].mean.y.toFixed(2)+"",w=e[55].variance.toFixed(2)+"";return{c(){t=v("tr"),n=v("td"),i=p(b),s=f(),a=v("td"),l=p(y),o=f(),r=v("td"),c=p(w),h=f(),g(n,"class","svelte-bim9ea"),g(a,"class","svelte-bim9ea"),g(r,"class","svelte-bim9ea"),g(t,"class","svelte-bim9ea")},m(e,m){u(e,t,m),d(t,n),d(n,i),d(t,s),d(t,a),d(a,l),d(t,o),d(t,r),d(r,c),d(t,h)},p(e,t){8192&t[0]&&b!==(b=e[55].mean.x.toFixed(2)+"")&&x(i,b),8192&t[0]&&y!==(y=e[55].mean.y.toFixed(2)+"")&&x(l,y),8192&t[0]&&w!==(w=e[55].variance.toFixed(2)+"")&&x(c,w)},d(e){e&&m(t)}}}function B(t){let n;return{c(){n=v("p"),n.textContent="Loading visualization...",g(n,"class","svelte-bim9ea")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function J(e){let t,n;return{c(){t=v("img"),r(t.src,n=e[10])||g(t,"src",n),g(t,"alt","Visualization"),g(t,"class","svelte-bim9ea")},m(e,n){u(e,t,n)},p(e,i){1024&i[0]&&!r(t.src,n=e[10])&&g(t,"src",n)},d(e){e&&m(t)}}}function R(t){let n,a,l,o,r,c,y,_,$,z,E,F,k,L,M,S,T,C,G,N,D,O,P,j,A,H,V,I,R,Z,K,Q,ee,te,ne,ie,se,ae,le,oe,re,ce,de,ue,me,he,ve,pe,fe,be,ge,ye,xe,we,_e,$e,ze,Ee,Fe,ke,Le,Me,Se,Te,Ce,Ge,Ne,De,Oe,Pe,je,Ae,He,Ve,Ie,Ye,Xe,qe,We,Be,Je,Re,Ue,Ze,Ke,Qe,et,tt,nt,it,st,at,lt,ot,rt,ct,dt,ut,mt,ht,vt,pt,ft,bt,gt,yt,xt,wt,_t,$t,zt,Et,Ft,kt,Lt,Mt,St,Tt,Ct,Gt,Nt,Dt,Ot,Pt,jt=t[13].length+"",At=t[9]?"Stop":"Start",Ht=t[3].toFixed(4)+"",Vt=t[4].toFixed(3)+"",It=t[13],Yt=[];for(let e=0;e<It.length;e+=1)Yt[e]=q(X(t,It,e));let Xt=t[13],qt=[];for(let e=0;e<Xt.length;e+=1)qt[e]=W(Y(t,Xt,e));function Wt(e,t){return e[10]?J:e[9]?B:void 0}let Bt=Wt(t),Jt=Bt&&Bt(t);return{c(){n=v("main"),a=v("header"),a.innerHTML='<div class="container svelte-bim9ea"><h1 class="title svelte-bim9ea">Understanding GFlowNets</h1> \n      <p class="subtitle svelte-bim9ea">Gaining intuition for Generative Flow Networks and how to train them</p></div>',l=f(),o=v("section"),o.innerHTML='<h2 class="section-title svelte-bim9ea">What is a GFlowNet?</h2> \n    <p class="section-text svelte-bim9ea">Short Description: What can they do, how do they work, advantages</p> \n\n    <h2 class="section-title svelte-bim9ea">Toy Environment</h2> \n    <p class="section-text svelte-bim9ea">A 2-dimensional multivariate Gaussian environment with two modes. GFlowNet\n      takes steps in the x or y direction, and rewards are calculated based on the mixture of\n      Gaussians.</p> \n    <ul class="bullet-list svelte-bim9ea"><li class="svelte-bim9ea">Variable sequence length is typically supported, but fixed here for simplicity.</li> \n      <li class="svelte-bim9ea">State does not depend on the order of steps.</li> \n      <li class="svelte-bim9ea">Added a counter to avoid circular paths in the graph.</li></ul> \n    <div class="image-container svelte-bim9ea"><img src="/images/env1.png" class="image svelte-bim9ea" alt="Rendering of the environment"/></div>',r=f(),c=v("section"),c.innerHTML='<h2 class="section-title svelte-bim9ea">Training</h2> \n    <p class="section-text svelte-bim9ea">Visualizing how GFlowNet samples from the underlying distribution.\n      -&gt; Learns full distribution given enough compute\n      TODO: Add slider over training iterations to visualizations to add interactivity and see training progress</p> \n    <div class="image-container svelte-bim9ea"><img src="/images/run1.png" class="image svelte-bim9ea" alt="GFN samples from the underlying distribution"/></div> \n\n    <h2 class="section-title svelte-bim9ea">Mode Collapse</h2> \n    <p class="section-text svelte-bim9ea">If there is little probability mass between modes, we see mode collapse.</p> \n    <div class="image-container svelte-bim9ea"><img src="/images/run2.png" class="image svelte-bim9ea" alt="Low variance leads to sampling from one mode"/></div> \n    <p class="section-text svelte-bim9ea">Training off-policy mitigates this issue.\n      We added variance to each step -&gt; more exploring</p> \n    <div class="image-container svelte-bim9ea"><img src="/images/run3.png" class="image svelte-bim9ea" alt="Off-policy training helps"/></div>',y=f(),_=v("section"),_.innerHTML='<h2 class="section-title svelte-bim9ea">Flow</h2> \n    <p class="section-text svelte-bim9ea">Visualize flow between states. Probably interactive:\n      Hovering over env and displaying flow in 8 directions with arrows.\n      Probably need to discretize for this?</p>',$=f(),z=v("section"),z.innerHTML='<div class="container svelte-bim9ea"><h1 class="title svelte-bim9ea">Playground</h1> \n      <p class="subtitle svelte-bim9ea">Change the environment and train your own GFlowNet to get a feeling on how they work.</p></div>',E=f(),F=v("section"),k=v("p"),k.textContent="Here you can change the environment.\n      Drag the center of the circles to change the mean and the border to change the variance.\n      You can also add more Gaussians if you want.",L=f(),M=v("div"),S=v("div"),T=f(),C=v("div");for(let e=0;e<Yt.length;e+=1)Yt[e].c();G=f(),N=v("div"),D=p("Number of Gaussians:\n      "),O=v("button"),P=p("-"),A=f(),H=v("span"),V=p(jt),I=f(),R=v("button"),Z=p("+"),Q=f(),ee=v("table"),te=v("thead"),te.innerHTML='<tr class="svelte-bim9ea"><th class="svelte-bim9ea">Mean X</th> \n          <th class="svelte-bim9ea">Mean Y</th> \n          <th class="svelte-bim9ea">Variance</th></tr>',ne=f(),ie=v("tbody");for(let e=0;e<qt.length;e+=1)qt[e].c();se=f(),ae=v("p"),ae.textContent="change training settings and start training (visualize training by sampling every n steps),\n      all interactivty deactivated while training, add stop button.",le=f(),oe=v("div"),re=v("button"),ce=p("Reset"),de=f(),ue=v("button"),me=p(At),he=f(),ve=v("div"),pe=v("div"),fe=v("label"),fe.textContent="Off-policy",be=f(),ge=v("input"),ye=f(),xe=v("span"),we=p(t[1]),_e=f(),$e=v("div"),ze=v("label"),ze.textContent="Iterations to train",Ee=f(),Fe=v("input"),ke=f(),Le=v("span"),Me=p(t[2]),Se=f(),Te=v("div"),Ce=v("label"),Ce.textContent="Learning rate of the model",Ge=f(),Ne=v("input"),De=f(),Oe=v("span"),Pe=p(Ht),je=f(),Ae=v("div"),He=v("label"),He.textContent="Learning rate of LogZ",Ve=f(),Ie=v("input"),Ye=f(),Xe=v("span"),qe=p(Vt),We=f(),Be=v("div"),Je=v("label"),Je.textContent="Length of trajectory",Re=f(),Ue=v("input"),Ze=f(),Ke=v("span"),Qe=p(t[6]),et=f(),tt=v("div"),nt=v("label"),nt.textContent="Number of hidden layers",it=f(),st=v("input"),at=f(),lt=v("span"),ot=p(t[7]),rt=f(),ct=v("div"),dt=v("label"),dt.textContent="Seed (TODO)",ut=f(),mt=v("input"),ht=f(),vt=v("span"),pt=p(t[8]),ft=f(),bt=v("div"),gt=v("label"),gt.textContent="Training batch size",yt=f(),xt=v("input"),wt=f(),_t=v("span"),$t=p(t[12]),zt=f(),Et=v("div"),Ft=v("label"),Ft.textContent="Update visualization every n interations",kt=f(),Lt=v("input"),Mt=f(),St=v("span"),Tt=p(t[5]),Ct=f(),Gt=v("div"),Jt&&Jt.c(),Nt=f(),Dt=v("section"),Dt.innerHTML='<h2 class="section-title svelte-bim9ea">Sources</h2> \n    <p class="section-text svelte-bim9ea">Add sources</p>',g(a,"class","header svelte-bim9ea"),g(o,"class","section svelte-bim9ea"),g(c,"class","section section-light svelte-bim9ea"),g(_,"class","section svelte-bim9ea"),g(z,"class","playground svelte-bim9ea"),g(k,"class","section-text svelte-bim9ea"),g(S,"id",U),g(S,"style","width: 1000px; position: relative; top: 0; left: 0; z-index: 1; /* Ensure the image is below the canvas */"),g(S,"class","svelte-bim9ea"),g(C,"class","canvas-container svelte-bim9ea"),g(M,"class","env-container svelte-bim9ea"),O.disabled=j=t[9]||1===t[13].length,g(O,"class","svelte-bim9ea"),g(H,"class","svelte-bim9ea"),R.disabled=K=t[9]||4===t[13].length,g(R,"class","svelte-bim9ea"),g(N,"class","controls svelte-bim9ea"),g(te,"class","svelte-bim9ea"),g(ie,"class","svelte-bim9ea"),g(ee,"class","svelte-bim9ea"),g(ae,"class","section-text svelte-bim9ea"),g(re,"class","reset-button svelte-bim9ea"),re.disabled=t[9],g(ue,"class","reset-button svelte-bim9ea"),g(oe,"class","buttonscontainer svelte-bim9ea"),g(fe,"for","off_policy"),g(fe,"class","svelte-bim9ea"),g(ge,"type","range"),g(ge,"min","0"),g(ge,"max","3"),g(ge,"step","0.1"),g(ge,"id","off_policy"),ge.disabled=t[9],g(ge,"class","svelte-bim9ea"),g(xe,"class","svelte-bim9ea"),g(pe,"class","slider svelte-bim9ea"),g(ze,"for","n_iterations"),g(ze,"class","svelte-bim9ea"),g(Fe,"type","range"),g(Fe,"min","100"),g(Fe,"max","10000"),g(Fe,"step","10"),g(Fe,"id","n_iterations"),Fe.disabled=t[9],g(Fe,"class","svelte-bim9ea"),g(Le,"class","svelte-bim9ea"),g($e,"class","slider svelte-bim9ea"),g(Ce,"for","lr_model"),g(Ce,"class","svelte-bim9ea"),g(Ne,"type","range"),g(Ne,"min","0.0001"),g(Ne,"max","0.1"),g(Ne,"step","0.0001"),g(Ne,"id","lr_model"),Ne.disabled=t[9],g(Ne,"class","svelte-bim9ea"),g(Oe,"class","svelte-bim9ea"),g(Te,"class","slider svelte-bim9ea"),g(He,"for","lr_logz"),g(He,"class","svelte-bim9ea"),g(Ie,"type","range"),g(Ie,"min","0.001"),g(Ie,"max","0.3"),g(Ie,"step","0.001"),g(Ie,"id","lr_logz"),Ie.disabled=t[9],g(Ie,"class","svelte-bim9ea"),g(Xe,"class","svelte-bim9ea"),g(Ae,"class","slider svelte-bim9ea"),g(Je,"for","trajectory_length"),g(Je,"class","svelte-bim9ea"),g(Ue,"type","range"),g(Ue,"min","1"),g(Ue,"max","8"),g(Ue,"step","1"),g(Ue,"id","trajectory_lenght"),Ue.disabled=t[9],g(Ue,"class","svelte-bim9ea"),g(Ke,"class","svelte-bim9ea"),g(Be,"class","slider svelte-bim9ea"),g(nt,"for","hidden_layer"),g(nt,"class","svelte-bim9ea"),g(st,"type","range"),g(st,"min","1"),g(st,"max","8"),g(st,"step","1"),g(st,"id","hidden_layer"),st.disabled=t[9],g(st,"class","svelte-bim9ea"),g(lt,"class","svelte-bim9ea"),g(tt,"class","slider svelte-bim9ea"),g(dt,"for","seed"),g(dt,"class","svelte-bim9ea"),g(mt,"type","range"),g(mt,"min","0"),g(mt,"max","9999"),g(mt,"step","1"),g(mt,"id","seed"),mt.disabled=t[9],g(mt,"class","svelte-bim9ea"),g(vt,"class","svelte-bim9ea"),g(ct,"class","slider svelte-bim9ea"),g(gt,"for","batch_size"),g(gt,"class","svelte-bim9ea"),g(xt,"type","range"),g(xt,"min","3"),g(xt,"max","11"),g(xt,"step","1"),g(xt,"id","batch_size"),xt.disabled=t[9],g(xt,"class","svelte-bim9ea"),g(_t,"class","svelte-bim9ea"),g(bt,"class","slider svelte-bim9ea"),g(Ft,"for","vis_every"),g(Ft,"class","svelte-bim9ea"),g(Lt,"type","range"),g(Lt,"min","10"),g(Lt,"max","500"),g(Lt,"step","10"),g(Lt,"id","vis_every"),Lt.disabled=t[9],g(Lt,"class","svelte-bim9ea"),g(St,"class","svelte-bim9ea"),g(Et,"class","slider svelte-bim9ea"),g(ve,"class","slider-container svelte-bim9ea"),g(Gt,"class","visualization svelte-bim9ea"),g(F,"class","section-light svelte-bim9ea"),g(Dt,"class","section svelte-bim9ea"),g(n,"class","main-content svelte-bim9ea")},m(e,i){u(e,n,i),d(n,a),d(n,l),d(n,o),d(n,r),d(n,c),d(n,y),d(n,_),d(n,$),d(n,z),d(n,E),d(n,F),d(F,k),d(F,L),d(F,M),d(M,S),d(M,T),d(M,C);for(let e=0;e<Yt.length;e+=1)Yt[e]&&Yt[e].m(C,null);d(F,G),d(F,N),d(N,D),d(N,O),d(O,P),d(N,A),d(N,H),d(H,V),d(N,I),d(N,R),d(R,Z),d(F,Q),d(F,ee),d(ee,te),d(ee,ne),d(ee,ie);for(let e=0;e<qt.length;e+=1)qt[e]&&qt[e].m(ie,null);d(F,se),d(F,ae),d(F,le),d(F,oe),d(oe,re),d(re,ce),d(oe,de),d(oe,ue),d(ue,me),d(F,he),d(F,ve),d(ve,pe),d(pe,fe),d(pe,be),d(pe,ge),w(ge,t[1]),d(pe,ye),d(pe,xe),d(xe,we),d(ve,_e),d(ve,$e),d($e,ze),d($e,Ee),d($e,Fe),w(Fe,t[2]),d($e,ke),d($e,Le),d(Le,Me),d(ve,Se),d(ve,Te),d(Te,Ce),d(Te,Ge),d(Te,Ne),w(Ne,t[3]),d(Te,De),d(Te,Oe),d(Oe,Pe),d(ve,je),d(ve,Ae),d(Ae,He),d(Ae,Ve),d(Ae,Ie),w(Ie,t[4]),d(Ae,Ye),d(Ae,Xe),d(Xe,qe),d(ve,We),d(ve,Be),d(Be,Je),d(Be,Re),d(Be,Ue),w(Ue,t[6]),d(Be,Ze),d(Be,Ke),d(Ke,Qe),d(ve,et),d(ve,tt),d(tt,nt),d(tt,it),d(tt,st),w(st,t[7]),d(tt,at),d(tt,lt),d(lt,ot),d(ve,rt),d(ve,ct),d(ct,dt),d(ct,ut),d(ct,mt),w(mt,t[8]),d(ct,ht),d(ct,vt),d(vt,pt),d(ve,ft),d(ve,bt),d(bt,gt),d(bt,yt),d(bt,xt),w(xt,t[0]),d(bt,wt),d(bt,_t),d(_t,$t),d(ve,zt),d(ve,Et),d(Et,Ft),d(Et,kt),d(Et,Lt),w(Lt,t[5]),d(Et,Mt),d(Et,St),d(St,Tt),d(F,Ct),d(F,Gt),Jt&&Jt.m(Gt,null),d(n,Nt),d(n,Dt),Ot||(Pt=[b(O,"mouseover",t[26]),b(O,"mouseout",t[23]),b(O,"click",t[19]),b(R,"click",t[18]),b(re,"click",t[14]),b(ue,"click",(function(){s(t[9]?t[16]:t[15])&&(t[9]?t[16]:t[15]).apply(this,arguments)})),b(ge,"change",t[27]),b(ge,"input",t[27]),b(Fe,"change",t[28]),b(Fe,"input",t[28]),b(Ne,"change",t[29]),b(Ne,"input",t[29]),b(Ie,"change",t[30]),b(Ie,"input",t[30]),b(Ue,"change",t[31]),b(Ue,"input",t[31]),b(st,"change",t[32]),b(st,"input",t[32]),b(mt,"change",t[33]),b(mt,"input",t[33]),b(xt,"change",t[34]),b(xt,"input",t[34]),b(Lt,"change",t[35]),b(Lt,"input",t[35])],Ot=!0)},p(e,n){if(t=e,3156480&n[0]){let e;for(It=t[13],e=0;e<It.length;e+=1){const i=X(t,It,e);Yt[e]?Yt[e].p(i,n):(Yt[e]=q(i),Yt[e].c(),Yt[e].m(C,null))}for(;e<Yt.length;e+=1)Yt[e].d(1);Yt.length=It.length}if(8704&n[0]&&j!==(j=t[9]||1===t[13].length)&&(O.disabled=j),8192&n[0]&&jt!==(jt=t[13].length+"")&&x(V,jt),8704&n[0]&&K!==(K=t[9]||4===t[13].length)&&(R.disabled=K),8192&n[0]){let e;for(Xt=t[13],e=0;e<Xt.length;e+=1){const i=Y(t,Xt,e);qt[e]?qt[e].p(i,n):(qt[e]=W(i),qt[e].c(),qt[e].m(ie,null))}for(;e<qt.length;e+=1)qt[e].d(1);qt.length=Xt.length}512&n[0]&&(re.disabled=t[9]),512&n[0]&&At!==(At=t[9]?"Stop":"Start")&&x(me,At),512&n[0]&&(ge.disabled=t[9]),2&n[0]&&w(ge,t[1]),2&n[0]&&x(we,t[1]),512&n[0]&&(Fe.disabled=t[9]),4&n[0]&&w(Fe,t[2]),4&n[0]&&x(Me,t[2]),512&n[0]&&(Ne.disabled=t[9]),8&n[0]&&w(Ne,t[3]),8&n[0]&&Ht!==(Ht=t[3].toFixed(4)+"")&&x(Pe,Ht),512&n[0]&&(Ie.disabled=t[9]),16&n[0]&&w(Ie,t[4]),16&n[0]&&Vt!==(Vt=t[4].toFixed(3)+"")&&x(qe,Vt),512&n[0]&&(Ue.disabled=t[9]),64&n[0]&&w(Ue,t[6]),64&n[0]&&x(Qe,t[6]),512&n[0]&&(st.disabled=t[9]),128&n[0]&&w(st,t[7]),128&n[0]&&x(ot,t[7]),512&n[0]&&(mt.disabled=t[9]),256&n[0]&&w(mt,t[8]),256&n[0]&&x(pt,t[8]),512&n[0]&&(xt.disabled=t[9]),1&n[0]&&w(xt,t[0]),4096&n[0]&&x($t,t[12]),512&n[0]&&(Lt.disabled=t[9]),32&n[0]&&w(Lt,t[5]),32&n[0]&&x(Tt,t[5]),Bt===(Bt=Wt(t))&&Jt?Jt.p(t,n):(Jt&&Jt.d(1),Jt=Bt&&Bt(t),Jt&&(Jt.c(),Jt.m(Gt,null)))},i:e,o:e,d(e){e&&m(n),h(Yt,e),h(qt,e),Jt&&Jt.d(),Ot=!1,i(Pt)}}}let U="plot-container";function Z(e,t,n,i){const s=e-n.x,a=t-n.y,l=i;return Math.exp(-(s**2+a**2)/(2*l))/(2*Math.PI*Math.sqrt(l))}function K(t,n,i){let s,l,o,r=0,d=2e3,u=.001,m=.1,h=50,v=2,p=2,f=2,b=7614,g=6,x=null,w=!1,_=null;async function $(){try{const e=function(e){let t;return c(e,(e=>t=e))(),t}(z);fetch("http://localhost:8000/get_env_state",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gaussians:e})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((e=>{e.image&&(x=`data:image/png;base64,${e.image}`)})).catch((e=>{console.error(e)}))}catch(e){console.error(e)}}const z=function(t,n=e){let i;const s=new Set;function l(e){if(a(t,e)&&(t=e,i)){const e=!I.length;for(const e of s)e[1](),I.push(e,t);if(e){for(let e=0;e<I.length;e+=2)I[e][0](I[e+1]);I.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(a,o=e){const r=[a,o];return s.add(r),1===s.size&&(i=n(l)||e),a(t),()=>{s.delete(r),0===s.size&&i&&(i(),i=null)}}}}([{mean:{x:-1,y:-1},variance:.5},{mean:{x:1,y:1},variance:.5}]);var F,k;F=z,k=e=>i(13,l=e),t.$$.on_destroy.push(c(F,k));const L=-3,M=3,S=.1,T=1;let C=null,G=null;const N=(e,t,n)=>Math.min(Math.max(e,t),n);let D=!1,O=!1,P={x:0,y:0};const j=(e,t)=>{w||(D=!0,C=t,P={x:e.clientX,y:e.clientY})},A=(e,t)=>{w||(O=!0,C=t,P={x:e.clientX,y:e.clientY})},H=e=>{if(!C||w)return;const t=(e.clientX-P.x)/100,n=(e.clientY-P.y)/100;z.update((e=>{const i=e.find((e=>e===C));if(D&&i)i.mean.x=N(i.mean.x+t,L,M),i.mean.y=N(i.mean.y-n,L,M);else if(O&&i){const e=i.variance+t;i.variance=N(e,S,T)}return e})),P={x:e.clientX,y:e.clientY}},V=()=>{$(),(D||O)&&(console.log(l),q(U,l,{title:"Gaussian Mixture Environment",gridSize:100,alpha2D:1,alpha3D:.8,levels:50})),D=!1,O=!1,C=null},Y=e=>{i(11,G=e)};let X;function q(e,t,n={}){const i=n.gridSize||100,s=n.alpha2D||1,a=n.alpha3D||.8,l=[-3,3],o=Array.from({length:i},((e,t)=>l[0]+t*(l[1]-l[0])/(i-1))),r=Array.from({length:i},((e,t)=>l[0]+t*(l[1]-l[0])/(i-1))),c=function(e,t){const{x:n,y:i}=e,s=Array.from({length:n.length},(()=>Array(i.length).fill(0)));for(const{mean:e,variance:a}of t)for(let t=0;t<n.length;t++)for(let l=0;l<i.length;l++)s[l][t]+=Z(n[t],i[l],e,a);return s}({x:o,y:r},t),d={x:o,y:r,z:c,type:"contour",colorscale:"Viridis",opacity:s,contours:{coloring:"fill",showlines:!1},colorbar:{len:.8,x:.45,thickness:20}},u={x:o,y:r,z:c,type:"surface",colorscale:"Viridis",opacity:a,showscale:!1},m={title:n.title||null,grid:{rows:1,columns:2,pattern:"independent"},xaxis:{title:"x",domain:[0,.45]},yaxis:{title:"y",scaleanchor:"x"},scene:{domain:{x:[.55,1]}},margin:{t:50,b:50,l:50,r:50}};X.newPlot(e,[d,u],m,{staticplot:!0,displayModeBar:!1})}E((()=>($(),window.addEventListener("mousemove",H),window.addEventListener("mouseup",V),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",V)}))),E((async()=>{await async function(){const e=document.createElement("script");return e.src="https://cdn.plot.ly/plotly-latest.min.js",document.head.appendChild(e),new Promise((t=>{e.onload=()=>{X=window.Plotly,t()}}))}(),q(U,l,{title:null,gridSize:100,alpha2D:1,alpha3D:.8,levels:50})}));return t.$$.update=()=>{1&t.$$.dirty[0]&&i(12,s=2**g)},[g,r,d,u,m,h,v,p,b,w,_,G,s,l,function(){i(1,r=0),i(2,d=2e3),i(3,u=.001),i(4,m=.1),i(5,h=50),i(6,v=2),i(7,p=2),f=2,i(8,b=7614),i(0,g=6)},async function(){try{i(9,w=!0);if(!(await fetch("http://localhost:8000/start_visualization",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({off_policy_value:r,n_iterations_value:d,lr_model_value:u,lr_logz_value:m,visualize_every:h,trajectory_length_value:v,hidden_layer_value:p,hidden_dim_value:f,seed_value:b,batch_size_value:s})})).ok)throw new Error("Failed to start visualization.");o=setInterval((async()=>{try{const e=await fetch("http://localhost:8000/get_visualization");if(!e.ok)throw new Error("Failed to fetch visualization.");const t=await e.json();if(t.image&&i(10,_=`data:image/png;base64,${t.image}`),t.completed)return console.log("Visualization process completed."),i(9,w=!1),void clearInterval(o)}catch(e){console.error(e)}}),200)}catch(e){console.error(e),i(9,w=!1)}},async function(){try{if(!(await fetch("http://localhost:8000/stop_visualization")).ok)throw new Error("Failed to stop visualization.");clearInterval(o),i(9,w=!1)}catch(e){console.error(e)}},z,()=>{z.update((e=>(e.length<4&&e.push({mean:{x:0,y:0},variance:.5}),e))),q(U,l,{title:"Gaussian Mixture Environment",gridSize:100,alpha2D:1,alpha3D:.8,levels:50})},()=>{z.update((e=>(e.length>1&&e.pop(),e))),q(U,l,{title:"Gaussian Mixture Environment",gridSize:100,alpha2D:1,alpha3D:.8,levels:50})},j,A,Y,()=>{i(11,G=null)},(e,t)=>A(t,e),(e,t)=>j(t,e),()=>Y(l.length-1),function(){r=y(this.value),i(1,r)},function(){d=y(this.value),i(2,d)},function(){u=y(this.value),i(3,u)},function(){m=y(this.value),i(4,m)},function(){v=y(this.value),i(6,v)},function(){p=y(this.value),i(7,p)},function(){b=y(this.value),i(8,b)},function(){g=y(this.value),i(0,g)},function(){h=y(this.value),i(5,h)}]}return new class extends V{constructor(e){super(),H(this,e,K,R,a,{},null,[-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
